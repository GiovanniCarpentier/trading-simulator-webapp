import{r as E}from"./index.Dy6lLLXr.js";var U={exports:{}},C={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ae;function ue(){if(ae)return C;ae=1;var Y=Symbol.for("react.transitional.element"),h=Symbol.for("react.fragment");function s(q,a,p){var j=null;if(p!==void 0&&(j=""+p),a.key!==void 0&&(j=""+a.key),"key"in a){p={};for(var v in a)v!=="key"&&(p[v]=a[v])}else p=a;return a=p.ref,{$$typeof:Y,type:q,key:j,ref:a!==void 0?a:null,props:p}}return C.Fragment=h,C.jsx=s,C.jsxs=s,C}var se;function he(){return se||(se=1,U.exports=ue()),U.exports}var e=he();const fe=()=>{const[Y]=E.useState(!0),h=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),[s,q]=E.useState({avgWin:200,avgLoss:100,winRate:50,accountSize:1e4,numberOfTrades:100,isPropFirm:!1,maxDrawdown:5,maxDailyLoss:2,tradesPerDay:5,showBreachDetails:!0}),[a,p]=E.useState(null),[j,v]=E.useState(!1),m=i=>{const{name:o,value:x,type:t,checked:D}=i.target;q({...s,[o]:t==="checkbox"?D:parseFloat(x)})},te=()=>{v(!0),setTimeout(()=>{const{avgWin:i,avgLoss:o,winRate:x,accountSize:t,numberOfTrades:D,isPropFirm:c,maxDrawdown:P,maxDailyLoss:u,tradesPerDay:F}=s,z=i/o,G=o/t*100,w=t,L=w*(G/100);let n=w,A=[n],V=[],T=0,W=0,$=n,H=0,Q=0,X=0,Z=0,_=-1,S=1,R=0,b=w,l=0,I=!1,d=0,O=0,k=0,g=0,B=0,N=0,M=[],r={day:1,trades:[],startBalance:w,endBalance:w,dailyPnL:0,dailyPnLPercent:0,dailyLossBreach:!1,cumulativeDrawdown:0,maxDrawdownBreach:!1};for(let f=0;f<D;f++){if(c&&I)continue;N++;const xe=N,ee=Math.random()*100<x;let J=0;if(ee){const y=L*z;n+=y,X+=y,H++,J=y,c&&(l+=y)}else n-=L,Z+=L,Q++,J=-L,c&&(l-=L);if(r.trades.push({tradeNumber:xe,isWin:ee,amount:J,balanceAfter:n}),A.push(n),_===-1&&n>=w&&A[A.length-2]<w&&(_=f),n>$?($=n,T=0):(T=($-n)/$*100,T>W&&(W=T)),V.push(T),c&&F>0&&R++,c&&l<0){const y=Math.abs(l)/b*100;y>u&&(O++,r.dailyLossBreach=!0,d+=y,r.cumulativeDrawdown=d,d>P&&(k=1,I=!0,r.maxDrawdownBreach=!0),R=F,g++,g>B&&(B=g))}if(c&&F>0&&R>=F){if(l<0&&Math.abs(l)/b*100<=u){const y=Math.abs(l)/b*100;d+=y,r.cumulativeDrawdown=d,g++,g>B&&(B=g)}else l>=0&&(g=0);d>P&&k===0&&(k=1,I=!0,r.maxDrawdownBreach=!0),r.endBalance=n,r.dailyPnL=l,r.dailyPnLPercent=l/b*100,M.push({...r}),S++,R=0,b=n,l=0,r={day:S,trades:[],startBalance:n,endBalance:n,dailyPnL:0,dailyPnLPercent:0,dailyLossBreach:!1,cumulativeDrawdown:d,maxDrawdownBreach:!1}}}if(c&&F>0&&R>0){if(l<0){const f=Math.abs(l)/b*100;f>u&&(O++,r.dailyLossBreach=!0),d+=f,r.cumulativeDrawdown=d,d>P&&k===0&&(k=1,r.maxDrawdownBreach=!0)}r.endBalance=n,r.dailyPnL=l,r.dailyPnLPercent=l/b*100,M.push({...r})}const ne=x/100*z,re=(1-x/100)*1,le=ne-re,K=N>0?(X-Z)/N:0,ie=K/t*100,de=(n-t)/t*100,ce=n-t,me=M.find(f=>f.maxDrawdownBreach),oe=c?{maxDrawdownBreaches:k,dailyLossBreaches:O,cumulativeDrawdown:d,maxConsecutiveLossDays:B,actualTradeCount:N,actualDaysCount:S,tradesPerDayTarget:F,avgTradesPerDay:S>0?N/S:0,dailyLogs:M,breachDay:me,maxDrawdownLimit:P}:null;p({finalBalance:n,maxDrawdown:W,expectancy:le,averageTradeAmount:K,averageTradePercent:ie,totalReturn:de,netProfit:ce,equity:A,drawdowns:V,winCount:H,lossCount:Q,fixedRiskAmount:L,breakEvenTrade:_,riskRewardRatio:z,riskPercentage:G,propFirmStats:oe,isPropFirm:c,actualTradesTaken:N}),v(!1)},0)};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 bg-gray-50 rounded-lg shadow",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Trading System Analyzer (Non-Compounding)"}),e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Trading Parameters"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Average Win ($)"}),e.jsx("input",{type:"number",name:"avgWin",value:s.avgWin,onChange:m,min:"1",step:"1",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Average Loss ($)"}),e.jsx("input",{type:"number",name:"avgLoss",value:s.avgLoss,onChange:m,min:"1",step:"1",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Win Rate (%)"}),e.jsx("input",{type:"number",name:"winRate",value:s.winRate,onChange:m,min:"1",max:"99",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Size ($)"}),e.jsx("input",{type:"number",name:"accountSize",value:s.accountSize,onChange:m,min:"100",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Trades"}),e.jsx("input",{type:"number",name:"numberOfTrades",value:s.numberOfTrades,onChange:m,min:"1",max:"10000",className:"w-full p-2 border rounded"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",id:"propFirmCheckbox",name:"isPropFirm",checked:s.isPropFirm,onChange:m,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"propFirmCheckbox",className:"ml-2 block text-sm font-medium text-gray-700",children:"Enable Prop Firm Rules"})]})}),s.isPropFirm&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Drawdown Allowed (%)"}),e.jsx("input",{type:"number",name:"maxDrawdown",value:s.maxDrawdown,onChange:m,min:"0.1",max:"100",step:"0.1",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Daily Loss Allowed (%)"}),e.jsx("input",{type:"number",name:"maxDailyLoss",value:s.maxDailyLoss,onChange:m,min:"0.1",max:"100",step:"0.1",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trades Per Day"}),e.jsx("input",{type:"number",name:"tradesPerDay",value:s.tradesPerDay,onChange:m,min:"1",max:"100",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Show Breach Details"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"showBreachDetailsCheckbox",name:"showBreachDetails",checked:s.showBreachDetails,onChange:m,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Shows details when drawdown limit is exceeded)"})]})]})]})]}),e.jsx("button",{onClick:te,disabled:j,className:`mt-4 ${j?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} text-white px-4 py-2 rounded transition-colors w-full md:w-auto`,children:j?"Running Simulation...":"Run Simulation"})]}),a&&e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Simulation Results",a.isPropFirm&&e.jsx("span",{className:"ml-2 text-sm font-normal text-blue-600",children:"(Prop Firm Rules Applied)"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Starting Balance:"}),e.jsx("span",{className:"font-medium",children:h(s.accountSize)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Final Balance:"}),e.jsx("span",{className:"font-medium",children:h(a.finalBalance)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Net Profit:"}),e.jsx("span",{className:`font-medium ${a.netProfit>=0?"text-green-600":"text-red-600"}`,children:h(a.netProfit)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fixed Risk Amount:"}),e.jsx("span",{className:"font-medium",children:h(a.fixedRiskAmount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Risk-Reward Ratio:"}),e.jsxs("span",{className:"font-medium",children:[a.riskRewardRatio.toFixed(2),":1"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Risk per Trade (%):"}),e.jsxs("span",{className:"font-medium",children:[a.riskPercentage.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Wins / Losses:"}),e.jsxs("span",{className:"font-medium",children:[a.winCount," / ",a.lossCount]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trades Taken:"}),e.jsxs("span",{className:"font-medium",children:[a.actualTradesTaken," of ",s.numberOfTrades]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Risk Analysis"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Max Drawdown (Peak-to-Trough):"}),e.jsxs("span",{className:"font-medium text-red-600",children:[a.maxDrawdown.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"System Expectancy:"}),e.jsxs("span",{className:`font-medium ${a.expectancy>=0?"text-green-600":"text-red-600"}`,children:[a.expectancy.toFixed(2),"R"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Average Trade Amount:"}),e.jsx("span",{className:`font-medium ${a.averageTradeAmount>=0?"text-green-600":"text-red-600"}`,children:h(a.averageTradeAmount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg Trade (% of initial):"}),e.jsxs("span",{className:`font-medium ${a.averageTradePercent>=0?"text-green-600":"text-red-600"}`,children:[a.averageTradePercent.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Return:"}),e.jsxs("span",{className:`font-medium ${a.totalReturn>=0?"text-green-600":"text-red-600"}`,children:[a.totalReturn.toFixed(2),"%"]})]}),a.propFirmStats&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-2 border-t border-gray-200 mt-2",children:e.jsx("span",{className:"font-medium text-blue-600",children:"Prop Firm Analysis:"})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Max Drawdown Breach:"}),e.jsx("span",{className:"font-medium text-red-600",children:a.propFirmStats.maxDrawdownBreaches>0?"Yes (Challenge Failed)":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Daily Loss Breaches:"}),e.jsx("span",{className:"font-medium text-red-600",children:a.propFirmStats.dailyLossBreaches})]}),e.jsx("div",{className:"flex justify-between",children:e.jsx("span",{className:"text-gray-600 text-xs",children:"(Trading halted on breach, drawdown accumulates)"})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Cumulative Drawdown:"}),e.jsxs("span",{className:"font-medium",children:[a.propFirmStats.cumulativeDrawdown.toFixed(2),"%"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(Limit: ",a.propFirmStats.maxDrawdownLimit,"%)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Max Consecutive Loss Days:"}),e.jsx("span",{className:"font-medium",children:a.propFirmStats.maxConsecutiveLossDays})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trading Days:"}),e.jsx("span",{className:"font-medium",children:a.propFirmStats.actualDaysCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trades Taken:"}),e.jsxs("span",{className:"font-medium",children:[a.propFirmStats.actualTradeCount," of ",s.numberOfTrades]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg Trades Per Day:"}),e.jsxs("span",{className:"font-medium",children:[a.propFirmStats.avgTradesPerDay.toFixed(1),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(Target: ",a.propFirmStats.tradesPerDayTarget,")"]})]})]}),s.showBreachDetails&&a.propFirmStats.breachDay&&e.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-2",children:[e.jsx("div",{className:"font-medium text-red-600 mb-2",children:"Drawdown Breach Details:"}),e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Day when breach occurred: "}),e.jsxs("span",{className:"font-medium",children:["Day ",a.propFirmStats.breachDay.day]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Daily P&L that caused breach: "}),e.jsxs("span",{className:`font-medium ${a.propFirmStats.breachDay.dailyPnL>=0?"text-green-600":"text-red-600"}`,children:[h(a.propFirmStats.breachDay.dailyPnL)," (",a.propFirmStats.breachDay.dailyPnLPercent.toFixed(2),"%)"]})]}),e.jsx("div",{className:"text-sm mt-2 mb-1",children:"Trades on breach day:"}),e.jsx("div",{className:"bg-gray-100 p-2 rounded text-sm max-h-32 overflow-y-auto",children:a.propFirmStats.breachDay.trades.map((i,o)=>e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsxs("span",{children:["Trade #",i.tradeNumber,":"]}),e.jsx("span",{className:i.isWin?"text-green-600":"text-red-600",children:h(i.amount)})]},o))}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Cumulative drawdown reached ",a.propFirmStats.breachDay.cumulativeDrawdown.toFixed(2),"%, exceeding the ",a.propFirmStats.maxDrawdownLimit,"% limit"]})]})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Equity Curve"}),e.jsx("div",{className:"w-full h-64 bg-gray-100 relative p-2 border rounded",children:a.equity.length>1&&e.jsx("svg",{viewBox:`0 0 ${a.equity.length-1} 100`,className:"w-full h-full",children:(()=>{const i=Math.min(...a.equity),x=Math.max(...a.equity)-i,t=u=>100-(u-i)/x*95;let D=`M 0 ${t(a.equity[0])}`;for(let u=1;u<a.equity.length;u++)D+=` L ${u-1} ${t(a.equity[u])}`;const c=`M 0 ${t(s.accountSize)} L ${a.equity.length-1} ${t(s.accountSize)}`,P=e.jsx("text",{x:"5",y:t(s.accountSize)-3,fontSize:"3",fill:"green",children:"Break-even Line"});return e.jsxs(e.Fragment,{children:[e.jsx("path",{d:D,fill:"none",stroke:"rgb(59, 130, 246)",strokeWidth:"0.5"}),e.jsx("path",{d:c,fill:"none",stroke:"rgba(34, 197, 94, 0.7)",strokeWidth:"0.6",strokeDasharray:"0.5,0.5"}),P]})})()})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Drawdown Chart"}),e.jsx("div",{className:"w-full h-48 bg-gray-100 relative p-2 border rounded",children:a.drawdowns.length>0&&e.jsx("svg",{viewBox:`0 0 ${a.drawdowns.length} 100`,className:"w-full h-full",children:(()=>{const i=Math.max(...a.drawdowns,5),o=t=>t/i*95;let x=`M 0 ${o(a.drawdowns[0])}`;for(let t=1;t<a.drawdowns.length;t++)x+=` L ${t} ${o(a.drawdowns[t])}`;return e.jsx(e.Fragment,{children:e.jsx("path",{d:x,fill:"none",stroke:"rgb(220, 38, 38)",strokeWidth:"0.5"})})})()})})]})]})]})};export{fe as default};
